jQuery(function(e){e("body").on("click","button.ywrfd-purge-coupon",function(){var r=e(".ywrfd-clear-result");r.show(),e(this).hide(),e.post(ywrfd_admin.ajax_url,{action:"ywrfd_clear_expired_coupons"},function(e){r.removeClass("clear-progress"),e.success?(r.addClass("clear-success"),r.html(e.message)):(r.addClass("clear-fail"),r.html(e.error))})}),e(document).ready(function(e){if(e("select#ywrfd_trigger").change(function(){"review"===e("option:selected",this).val()?(e(".ywrfd_review").show(),e(".ywrfd_multiple").hide(),e("#ywrfd_trigger_threshold").prop("required",!1)):(e(".ywrfd_review").hide(),e(".ywrfd_multiple").show(),e("#ywrfd_trigger_threshold").prop("required",!0))}).change(),e("select#ywrfd_discount_type").change(function(){"funds"===e("option:selected",this).val()?(e(".coupon_options").hide(),e("#ywrfd_expiry_days").parent().hide(),e("#ywrfd_free_shipping").parent().hide()):(e(".coupon_options").show(),e("#ywrfd_expiry_days").parent().show(),e("#ywrfd_free_shipping").parent().show())}).change(),ywrfd_admin.comment_moderation&&ywrfd_admin.ywar_active){var r=e("#ywar_review_moderation");r.attr("disabled",!0),r.parent().append(" <i>("+ywrfd_admin.comment_moderation_warning+")</i>")}e("#ywrfd_trigger_enable_notify").change(function(){e(this).is(":checked")?(e(".ywrfd_trigger_threshold_notify_field").show(),e(".ywrfd-review-number").change(),e("#ywrfd_trigger_threshold_notify").prop("required",!0)):(e(".ywrfd_trigger_threshold_notify_field").hide(),e("#ywrfd_trigger_threshold_notify").prop("required",!1))}).change(),e(".ywrfd-review-number").change(function(){if(e("#ywrfd_trigger_enable_notify").is(":checked")){var r=""!==e(this).val()?parseInt(e(this).val()):1;if(e(this).is(".ywrfd-target")){var i=e(".ywrfd-notify"),d=e(".ywrfd_multiple"),o={action:"ywrfd_get_minimum_threshold",value:r,post_id:ywrfd_admin.post_id,vendor_id:"0"!==ywrfd_admin.vendor_id?ywrfd_admin.vendor_id:""};if(d.is(".processing"))return!1;d.addClass("processing"),d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.post(ywrfd_admin.ajax_url,o,function(e){e.success?(e.value>r-1?i.prop("min",r>1?r-1:1):(i.prop("min",e.value),i.val()<e.value&&i.val(e.value)),i.prop("max",r>1?r-1:1)):(console.log(e.error),i.prop("min",1),i.prop("max",1)),d.removeClass("processing").unblock()})}else e(this).is(".ywrfd-notify")&&e(".ywrfd-target").prop("min",r+1)}}).change()})});